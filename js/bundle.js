(()=>{"use strict";const t=t=>{t&&(t.style.display="block",setTimeout((()=>{t.style.opacity=1})))},e=t=>{t&&(t.style.opacity=0,setTimeout((()=>{t.style.display="none"}),150))},c=()=>{class t{constructor(t,e,c,n,s,...r){this.id=t,this.title=e,this.price=c,this.currency=n,this.image=s,this.classes=r}render(){const t=document.createElement("div");t.classList.add("tile"),t.setAttribute("data-id",this.id),t.addEventListener("click",(()=>{var e;(e=t).classList.add("shake"),setTimeout((()=>{e.classList.remove("shake")}),600)})),t.innerHTML=`\n\t\t\t\t<img data-add src="${this.image}">\n\t\t\t\t<div class="title_price">\n\t\t\t\t\t<p class="title">${this.title}</p>\n\t\t\t\t\t<p class="price"><span data-current-price>${this.price}</span> ${this.currency}</p>\n\t\t\t\t</div>\n\t\t\t `,document.querySelector(".block_tiles").append(t)}}(async t=>{const e=await fetch(t);if(!e)throw new Error(`Couldn't fetch ${t}, status: ${e.status}`);return await e.json()})("http://localhost:3000/products").then((e=>{e.forEach((({id:e,title:c,price:n,currency:s,image:r})=>{new t(e,c,n,s,r).render()}))})).catch((t=>console.log(t)))},n=(t,e)=>{t.style.opacity=1,t.style.pointerEvents="all",document.body.style.overflow="hidden",e.style.cssText="transform: scale(1)"};window.addEventListener("DOMContentLoaded",(()=>{(()=>{const c=document.querySelector(".cart"),s=document.querySelector(".cart_content"),r=document.querySelector(".close img"),o=document.querySelector(".cart_main"),i=document.querySelector(".cart_title"),a=document.querySelector(".open"),l=document.querySelector(".empty"),d=()=>{o.children.length>0?i.textContent="Your items:":i.textContent="Your cart is empty!",o.children.length>0?(i.textContent="Your items:",e(l)):(i.textContent="Your cart is empty!",t(l))},u=()=>{c.style.opacity=0,c.style.pointerEvents="none",document.body.style.overflow="auto",s.style.cssText="transform: scale(0)"};window.addEventListener("click",(t=>{t.target===c||t.target===r?u():t.target===a&&n(c,s),t.target.hasAttribute("data-add")&&((t=>{const e=t.target.closest(".tile"),c={id:e.dataset.id,src:e.querySelector("[data-add]").getAttribute("src"),title:e.querySelector(".title").textContent,price:e.querySelector("[data-current-price]").textContent},{id:n,src:s,title:r,price:i}=c,a=o.querySelector(`[data-id="${n}"]`);if(a){const t=a.querySelector("[data-counter]");t.textContent<3&&t.textContent++}else{const t=`\n\t\t\t\t <div data-id="${n}" class="added_tile">\n\t\t\t\t\t <div class="block-counter">\n\t\t\t\t\t\t <p class="counter"><span data-counter>1</span>x</p>\n\t\t\t\t\t\t <img data-close style="width: 30px;" src="images/remove.png">\n\t\t\t\t\t </div>\n\t\t\t\t\t <img src="${s}">\n\t\t\t\t\t <div class="title_price">\n\t\t\t\t\t\t <p class="title">${r}</p>\n\t\t\t\t\t\t <p class="price"><span data-current-price>${i}</span> USD</p>\n\t\t\t\t\t </div>\n\t\t\t\t </div>\n\t\t\t  `;o.insertAdjacentHTML("beforeend",t)}})(t),d()),t.target.hasAttribute("data-close")&&(t=>{e(t.target.closest(".added_tile")),setTimeout((()=>{t.target.closest(".added_tile").remove(),d()}),150)})(t)})),window.addEventListener("keydown",(t=>{"Escape"===t.key&&u()}))})(),(()=>{const t=document.querySelector(".cart"),e=document.querySelector(".cart_content"),c=document.querySelector(".close_modal img"),s=document.querySelector(".open_modal"),r=document.querySelector(".modal"),o=()=>{r.style.cssText="\n\t\tright: -430px;\n\t\tbottom: 15px;\n\t\topacity: 0;\n\t"};setTimeout((()=>{r.style.cssText="\n\t\t\tright: 15px;\n\t\t\tbottom: 15px;\n\t\t\topacity: 1;\n\t\t"}),5e3),s.addEventListener("click",(()=>{n(t,e),o()})),c.addEventListener("click",o)})(),(()=>{const c=document.querySelector("input");c.addEventListener("input",(()=>{const n=c.value.toLowerCase();document.querySelectorAll(".title").forEach((c=>{c.innerHTML.toLowerCase().indexOf(n)>-1?t(c.closest(".tile")):e(c.closest(".tile"))}))}))})(),c()}))})();